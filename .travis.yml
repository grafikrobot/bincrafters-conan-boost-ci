# Common Linux config alias.
linux: &linux
  os: linux
  sudo: required
  language: python
  python: "3.6"
  services:
    - docker

osx: &osx
  os: osx
  language: generic

xcode83: &xcode83
  osx_image: xcode8.3
  <<: *osx

xcode94: &xcode90
  osx_image: xcode9
  <<: *osx

xcode94: &xcode91
  osx_image: xcode9.1
  <<: *osx

xcode94: &xcode94
  osx_image: xcode9.4
  <<: *osx

xcode10: &xcode10
  osx_image: xcode10
  <<: *osx

language: generic

matrix:
  fast_finish: true

env:
  global:
    - CONAN_USERNAME=bincrafters
    - CONAN_LOGIN_USERNAME=grafikrobot
    - CONAN_UPLOAD_ONLY_WHEN_STABLE=0
    - CONAN_SHARED_OPTION_NAME=
    - CONAN_REMOTES="https://api.bintray.com/conan/bincrafters/public-conan"
    - GCC_4="CONAN_GCC_VERSIONS=4.9 CONAN_DOCKER_IMAGE=conanio/gcc49"
    - GCC_5="CONAN_GCC_VERSIONS=5 CONAN_DOCKER_IMAGE=conanio/gcc5"
    - GCC_6="CONAN_GCC_VERSIONS=6 CONAN_DOCKER_IMAGE=conanio/gcc6"
    - GCC_7="CONAN_GCC_VERSIONS=7 CONAN_DOCKER_IMAGE=conanio/gcc7"
    - GCC_8="CONAN_GCC_VERSIONS=8 CONAN_DOCKER_IMAGE=conanio/gcc8"
    - CLANG_39="CONAN_CLANG_VERSIONS=3.9 CONAN_DOCKER_IMAGE=conanio/clang39"
    - CLANG_40="CONAN_CLANG_VERSIONS=4.0 CONAN_DOCKER_IMAGE=conanio/clang40"
    - CLANG_50="CONAN_CLANG_VERSIONS=5.0 CONAN_DOCKER_IMAGE=conanio/clang50"
    - CLANG_60="CONAN_CLANG_VERSIONS=6.0 CONAN_DOCKER_IMAGE=conanio/clang60"
    - XCODE_83="CONAN_APPLE_CLANG_VERSIONS=8.3"
    - XCODE_90="CONAN_APPLE_CLANG_VERSIONS=9.0"
    - XCODE_91="CONAN_APPLE_CLANG_VERSIONS=9.1"
    - XCODE_94="CONAN_APPLE_CLANG_VERSIONS=9.4"
    - XCODE_10="CONAN_APPLE_CLANG_VERSIONS=10.0"

install:
  - chmod +x .travis/run.sh
  - chmod +x .travis/install.sh
  - ./.travis/install.sh
  - export REPO_BRANCH=`dirname $TRAVIS_BRANCH`
  - echo $REPO_BRANCH
  - git clone -b $REPO_BRANCH https://github.com/bincrafters/conan-$REPO $REPO
  - cd $REPO

script:
  - &run ../.travis/run.sh

stages:
  - bootstrap0
  - bootstrap1
  - bootstrap2
  - stage0
  - stage1
  - stage2
  - stage3
  - stage4
  - stage5
  - stage6
  - stage7
  - stage8
  - stage9
  - stage10
  - stage11
  - stage12
  - stage13
  - stage14
  - stage15
  - stage16
  - stage17
  - stage18
  - stage19
  - stage20
  - stage21


jobs:
  include:
    - stage: bootstrap0
      env:
        - REPO=boost_build
        - CONAN_ARCHS=x86
        - CONAN_DOCKER_32_IMAGES=1
      <<: *linux
    - stage: bootstrap0
      env:
        - REPO=boost_build
        - CONAN_ARCHS=x86_64
      <<: *linux
    - stage: bootstrap0
      env: REPO=boost-package-tools
      <<: *linux
    - stage: bootstrap1
      env: REPO=boost_generator
      <<: *linux
    - stage: bootstrap2
      env: REPO=boost_base
      <<: *linux
    - stage: stage0
      env: REPO=boost_callable_traits
      <<: *linux
    - stage: stage0
      env: REPO=boost_compatibility
      <<: *linux
    - stage: stage0
      env: REPO=boost_config
      <<: *linux
    - stage: stage0
      env: REPO=boost_hof
      <<: *linux
    - stage: stage0
      env: REPO=boost_predef
      <<: *linux
    - stage: stage0
      env: REPO=boost_preprocessor
      <<: *linux
    - stage: stage1
      env: REPO=boost_assert
      <<: *linux
    - stage: stage1
      env: REPO=boost_io
      <<: *linux
    - stage: stage1
      env: REPO=boost_mp11
      <<: *linux
    - stage: stage1
      env: REPO=boost_static_assert
      <<: *linux
    - stage: stage1
      env: REPO=boost_vmd
      <<: *linux
    - stage: stage1
      env: REPO=boost_winapi
      <<: *linux
    - stage: stage2
      env: REPO=boost_core
      <<: *linux
    - stage: stage2
      env: REPO=boost_throw_exception
      <<: *linux
    - stage: stage3
      env: REPO=boost_align
      <<: *linux
    - stage: stage3
      env: REPO=boost_array
      <<: *linux
    - stage: stage3
      env: REPO=boost_bind
      <<: *linux
    - stage: stage3
      env: REPO=boost_integer
      <<: *linux
    - stage: stage3
      env: REPO=boost_logic
      <<: *linux
    - stage: stage3
      env: REPO=boost_move
      <<: *linux
    - stage: stage3
      env: REPO=boost_system
      <<: *linux
    - stage: stage3
      env: REPO=boost_type_traits
      <<: *linux
    - stage: stage4
      env: REPO=boost_atomic
      <<: *linux
    - stage: stage4
      env: REPO=boost_crc
      <<: *linux
    - stage: stage4
      env: REPO=boost_smart_ptr
      <<: *linux
    - stage: stage4
      env: REPO=boost_tuple
      <<: *linux
    - stage: stage4
      env: REPO=boost_utility
      <<: *linux
    - stage: stage5
      env: REPO=boost_endian
      <<: *linux
    - stage: stage5
      env: REPO=boost_exception
      <<: *linux
    - stage: stage5
      env: REPO=boost_mpl
      <<: *linux
    - stage: stage5
      env: REPO=boost_rational
      <<: *linux
    - stage: stage6
      env: REPO=boost_concept_check
      <<: *linux
    - stage: stage6
      env: REPO=boost_detail
      <<: *linux
    - stage: stage6
      env: REPO=boost_metaparse
      <<: *linux
    - stage: stage6
      env: REPO=boost_polygon
      <<: *linux
    - stage: stage6
      env: REPO=boost_qvm
      <<: *linux
    - stage: stage6
      env: REPO=boost_ratio
      <<: *linux
    - stage: stage6
      env: REPO=boost_typeof
      <<: *linux
    - stage: stage7
      env: REPO=boost_chrono
      <<: *linux
    - stage: stage7
      env: REPO=boost_container_hash
      <<: *linux
    - stage: stage7
      env: REPO=boost_conversion
      <<: *linux
    - stage: stage7
      env: REPO=boost_function_types
      <<: *linux
    - stage: stage7
      env: REPO=boost_numeric_interval
      <<: *linux
    - stage: stage7
      env: REPO=boost_optional
      <<: *linux
    - stage: stage8
      env: REPO=boost_format
      <<: *linux
    - stage: stage8
      env: REPO=boost_fusion
      <<: *linux
    - stage: stage8
      env: REPO=boost_intrusive
      <<: *linux
    - stage: stage8
      env: REPO=boost_numeric_conversion
      <<: *linux
    - stage: stage8
      env: REPO=boost_stacktrace
      <<: *linux
    - stage: stage8
      env: REPO=boost_timer
      <<: *linux
    - stage: stage8
      env: REPO=boost_tti
      <<: *linux
    - stage: stage8
      env: REPO=boost_type_index
      <<: *linux
    - stage: stage9
      env: REPO=boost_any
      <<: *linux
    - stage: stage9
      env: REPO=boost_container
      <<: *linux
    - stage: stage9
      env: REPO=boost_function
      <<: *linux
    - stage: stage9
      env: REPO=boost_hana
      <<: *linux
    - stage: stage9
      env: REPO=boost_iterator
      <<: *linux
    - stage: stage9
      env: REPO=boost_variant
      <<: *linux
    - stage: stage10
      env: REPO=boost_circular_buffer
      <<: *linux
    - stage: stage10
      env: REPO=boost_functional
      <<: *linux
    - stage: stage10
      env: REPO=boost_lambda
      <<: *linux
    - stage: stage10
      env: REPO=boost_locale
      <<: *linux
    - stage: stage10
      env: REPO=boost_regex
      <<: *linux
    - stage: stage10
      env: REPO=boost_scope_exit
      <<: *linux
    - stage: stage10
      env: REPO=boost_signals
      <<: *linux
    - stage: stage10
      env: REPO=boost_tokenizer
      <<: *linux
    - stage: stage10
      env: REPO=boost_unordered
      <<: *linux
    - stage: stage10
      env: REPO=boost_yap
      <<: *linux
    - stage: stage11
      env: REPO=boost_cycle_group_a
      <<: *linux
    - stage: stage11
      env: REPO=boost_local_function
      <<: *linux
    - stage: stage11
      env: REPO=boost_multi_array
      <<: *linux
    - stage: stage12
      env: REPO=boost_algorithm
      <<: *linux
    - stage: stage12
      env: REPO=boost_range
      <<: *linux
    - stage: stage13
      env: REPO=boost_cycle_group_b
      <<: *linux
    - stage: stage13
      env: REPO=boost_filesystem
      <<: *linux
    - stage: stage13
      env: REPO=boost_foreach
      <<: *linux
    - stage: stage13
      env: REPO=boost_proto
      <<: *linux
    - stage: stage13
      env: REPO=boost_test
      <<: *linux
    - stage: stage14
      env: REPO=boost_gil
      <<: *linux
    - stage: stage14
      env: REPO=boost_lexical_cast
      <<: *linux
    - stage: stage14
      env: REPO=boost_math
      <<: *linux
    - stage: stage14
      env: REPO=boost_phoenix
      <<: *linux
    - stage: stage15
      env: REPO=boost_cycle_group_c
      <<: *linux
    - stage: stage15
      env: REPO=boost_program_options
      <<: *linux
    - stage: stage15
      env:
        - REPO=boost_python
        - CONAN_ARCHS=x86
        - CONAN_DOCKER_32_IMAGES=1
      <<: *linux
    - stage: stage15
      env:
        - REPO=boost_python
        - CONAN_ARCHS=x86_64
      <<: *linux
    - stage: stage15
      env: REPO=boost_xpressive
      <<: *linux
    - stage: stage16
      env: REPO=boost_date_time
      <<: *linux
    - stage: stage16
      env: REPO=boost_dynamic_bitset
      <<: *linux
    - stage: stage16
      env: REPO=boost_iostreams
      <<: *linux
    - stage: stage16
      env: REPO=boost_multiprecision
      <<: *linux
    - stage: stage16
      env: REPO=boost_parameter
      <<: *linux
    - stage: stage16
      env: REPO=boost_pool
      <<: *linux
    - stage: stage16
      env: REPO=boost_random
      <<: *linux
    - stage: stage16
      env: REPO=boost_serialization
      <<: *linux
    - stage: stage16
      env: REPO=boost_spirit
      <<: *linux
    - stage: stage16
      env: REPO=boost_thread
      <<: *linux
    - stage: stage17
      env: REPO=boost_context
      <<: *linux
    - stage: stage17
      env: REPO=boost_contract
      <<: *linux
    - stage: stage17
      env: REPO=boost_convert
      <<: *linux
    - stage: stage17
      env: REPO=boost_dll
      <<: *linux
    - stage: stage17
      env: REPO=boost_geometry
      <<: *linux
    - stage: stage17
      env: REPO=boost_heap
      <<: *linux
    - stage: stage17
      env: REPO=boost_icl
      <<: *linux
    - stage: stage17
      env: REPO=boost_interprocess
      <<: *linux
    - stage: stage17
      env: REPO=boost_lockfree
      <<: *linux
    - stage: stage17
      env: REPO=boost_msm
      <<: *linux
    - stage: stage17
      env: REPO=boost_multi_index
      <<: *linux
    - stage: stage17
      env: REPO=boost_numeric_ublas
      <<: *linux
    - stage: stage17
      env: REPO=boost_ptr_container
      <<: *linux
    - stage: stage17
      env: REPO=boost_sort
      <<: *linux
    - stage: stage17
      env: REPO=boost_statechart
      <<: *linux
    - stage: stage17
      env: REPO=boost_type_erasure
      <<: *linux
    - stage: stage17
      env: REPO=boost_units
      <<: *linux
    - stage: stage17
      env: REPO=boost_uuid
      <<: *linux
    - stage: stage18
      env: REPO=boost_accumulators
      <<: *linux
    - stage: stage18
      env: REPO=boost_assign
      <<: *linux
    - stage: stage18
      env: REPO=boost_coroutine
      <<: *linux
    - stage: stage18
      env: REPO=boost_coroutine2
      <<: *linux
    - stage: stage18
      env: REPO=boost_fiber
      <<: *linux
    - stage: stage18
      env: REPO=boost_flyweight
      <<: *linux
    - stage: stage18
      env: REPO=boost_poly_collection
      <<: *linux
    - stage: stage18
      env: REPO=boost_property_tree
      <<: *linux
    - stage: stage18
      env: REPO=boost_signals2
      <<: *linux
    - stage: stage18
      env: REPO=boost_wave
      <<: *linux
    - stage: stage19
      env: REPO=boost_asio
      <<: *linux
    - stage: stage19
      env: REPO=boost_compute
      <<: *linux
    - stage: stage19
      env: REPO=boost_cycle_group_d
      <<: *linux
    - stage: stage20
      env: REPO=boost_beast
      <<: *linux
    - stage: stage20
      env:
        - REPO=boost_bimap
        - CONAN_ARCHS=x86
        - CONAN_DOCKER_32_IMAGES=1
      <<: *linux
    - stage: stage20
      env:
        - REPO=boost_bimap
        - CONAN_ARCHS=x86_64
      <<: *linux
    - stage: stage20
      env: REPO=boost_disjoint_sets
      <<: *linux
    - stage: stage20
      env:
        - REPO=boost_graph
        - CONAN_ARCHS=x86
        - CONAN_DOCKER_32_IMAGES=1
      <<: *linux
    - stage: stage20
      env:
        - REPO=boost_graph
        - CONAN_ARCHS=x86_64
      <<: *linux
    - stage: stage20
      env: REPO=boost_graph_parallel
      <<: *linux
    - stage: stage20
      env:
        - REPO=boost_log
        - CONAN_ARCHS=x86
        - CONAN_DOCKER_32_IMAGES=1
      <<: *linux
    - stage: stage20
      env:
        - REPO=boost_log
        - CONAN_ARCHS=x86_64
      <<: *linux
    - stage: stage20
      env:
        - REPO=boost_mpi
        - CONAN_ARCHS=x86
        - CONAN_DOCKER_32_IMAGES=1
      <<: *linux
    - stage: stage20
      env:
        - REPO=boost_mpi
        - CONAN_ARCHS=x86_64
      <<: *linux
    - stage: stage20
      env: REPO=boost_process
      <<: *linux
    - stage: stage20
      env:
        - REPO=boost_property_map
        - CONAN_ARCHS=x86
        - CONAN_DOCKER_32_IMAGES=1
      <<: *linux
    - stage: stage20
      env:
        - REPO=boost_property_map
        - CONAN_ARCHS=x86_64
      <<: *linux
    - stage: stage21
      env: REPO=boost_numeric_odeint
      <<: *linux

